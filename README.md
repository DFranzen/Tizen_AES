## Tizen AES

The Tizen platform supports AES encryption including key-management, but I found the documentation cumbersome and lacking a full example. The example for encrypted SQLite does not use the Tizen libraries, and stores the key in a variable, hard-coded and plaintext).
This is now my library, that I puzzled together from the available documentation and a bit of experimentation. Use it as an example how to use the Key Manager.

# Advantages
- The AES key is not compiled into the app-package, but generated by the Tizen Key Manager
- The AES key is different on every device, since it is generated on the first start
- The encrypted data can never be accessed outside the device, since the key is only stored here.
- The AES key can only be used by your app, guaranteed by the Key Manager
- The AES key is never in the app-memory, since the encryption/decryption is done in the Key Manager.

# Security Properties
- Uses 256-Bit AES CypherBlockChaining (CBC). Bit-length can be easily adjusted
- Initialization Vector (IV) is generated randomly with rand()
- Key Manager access is additionally secured with an access password (20 Bytes). Can be easily changed.

# Usage
To use this wrapper in a native Tizen project, simply add the two files to your project:
- AES_helper.h into your inc directory
- AES_helper.c into your src directory

If you want, you can change the security parameters:
- AES_KEY_ALIAS: Name of the key in the Key Manager (Your Package ID is added automatically)
- AES_KEY_SIZE: Number of bits for the AES encryption
- AES_KEY_PHRASE: Additional key to restrict access to the key in the Key Manager

And then include the .h file where you want to use encryption:
\#include "AES_helper.h"

Now you have the two main functions available to you:
- int AES_encrypt_string(char *in, char **out): Encrypts a string in and stores the result (including the IV in the string out
- int AES_decrypt_string(char *in, char **out): Decrypts a string in as returned by the encrypt-function. Decrypted string is stored in the string out.

## Example
```
#include "AES_helper.h"

int ret;

AES_init();

//------ Encryption ------------
char *text = "lorem ipsum dolor sit amet";
char *encrypted;

AES_encrypt_string(text, &encrypted);
// encrypted now contains encrypted text and IV, all you need to decrypt it (except the AES key)

//------- Decryption -----------
char *decrypted;
AES_decrypt_string(encrypted, &decrypted);
// decrypt now again contains plaintext "lorem ipsum dolor sit amet"
```
